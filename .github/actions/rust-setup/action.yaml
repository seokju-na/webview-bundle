name: "rust setup"
description: "rust setup"
inputs:
  components:
    description: "Comma-separated list of additional components to install."
    required: false
  targets:
    description: "Comma-separated list of additional targets to install."
    required: false
  cache-key:
    description: "Cache key for cargo"
    required: false
runs:
  using: "composite"
  steps:
    - name: Install rust
      id: install-rust
      uses: dtolnay/rust-toolchain@4be9e76fd7c4901c61fb841f559994984270fce7 # stable
      with:
        toolchain: 1.91.0
        components: ${{ inputs.components }}
        targets: ${{ inputs.targets }}
    - name: Cache cargo
      id: cache-cargo
      if: ${{ inputs.cache-key != '' }}
      uses: actions/cache@cdf6c1fa76f9f475f3d7449005a359c84ca0f306 # 5.0.3
      with:
        path: |
          ~/.cargo/registry/index/
          ~/.cargo/registry/cache/
          ~/.cargo/git/db/
          ~/.napi-rs
          .cargo-cache
          target/
        key: ${{ inputs.cache-key }}
